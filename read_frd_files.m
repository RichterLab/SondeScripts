clear all
clc
close all


hurrvec = { ...
    'Erika1997/' ...
    'Bonnie1998/' 'Danielle1998/' 'Earl1998/' 'Georges1998/' 'Mitch1998/' ...
    'Bret1999/' 'Dennis1999/' 'Dora1999/' 'Eugene1999/' 'Emily1999/' 'Floyd1999/' 'Irene1999/' ...
    'Helene2006/' ...
    'Felix2007/' 'Ingrid2007/' 'Karen2007/' ...
    'Dolly2008/' 'Fay2008/' 'Gustav2008/' 'Hanna2008/' 'Ike2008/' 'Kyle2008/' 'Paloma2008/' ...
    'Danny2009/' ...
    'Earl2010/' 'Karl2010/' 'Alex2010/' ...
    'Dora2011/' 'Irene2011/' 'Rina2011/' ...
    'Leslie2012/' 'Sandy2012/' ...
    'Gabrielle2013/' 'Ingrid2013/' 'Karen2013/' ...
    'Arthur2014/' 'Bertha2014/' 'Cristobal2014/' 'Edouard2014/' 'Gonzalo2014/' ...
    'Danny2015/' 'Erika2015/' 'Guillermo2015/' 'Hilda2015/' 'Joaquin2015/' 'Oho2015/' ...
    'Hermine2016/' 'Karl2016/' 'Matthew2016/' 'TropDep2016/' ...
    'Franklin2017/' 'Harvey2017/' 'Irma2017/' 'Jose2017/' 'Maria2017/' 'Nate2017/'};


count_hurr=0;
for hurr = hurrvec % 1. loop every hurricane
    count_hurr=count_hurr+1;
    
    sonde_idx = 1;
    filedirtmp = strcat('./all_storms/',hurr);
    filedir = filedirtmp{1};
    files = dir([filedir '*.frd']);
    for i=1:length(files) % 2. loop every dropsonde
        
        fprintf('Opening file: %s\n',[filedir files(i).name]);
        datstruct = importdata([filedir files(i).name],' ',21);
        
        frddat{sonde_idx} = datstruct.data;
        
        sonde_idx = sonde_idx + 1;
    end
    
   filename = strcat('./all_storms/',hurr{1}(1:end-1),'_frd_files.mat');
   save(filename,'frddat');
   clearvars frddat
end

